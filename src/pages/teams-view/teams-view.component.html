<div class="manager-page teams-page">
    <div class="manager-page_title">
        <h1>{{title}}</h1>
    </div>
    <div class="manager-page_content teamsPage_content">
        <mat-sidenav-container [hasBackdrop]="true">
        <mat-sidenav-content>
            <div class="manager-page_content-wrapper teams-page_content-wrapper">
                <div class="manager-page_content-container owned-teams">
                    <div class="manager-page_section-title owned-teams_section-title">
                        <h2>Owned</h2>
                        <pkm-button-icon color="grey" [isDisabled]="false" (click)="sidenav.toggle()">
                            <pkm-add-circle-icon />
                        </pkm-button-icon>
                    </div>  
                    <div *ngIf="loading">
                        Loading...
                    </div>
                    <div *ngIf="error">
                        Error :(
                    </div>
                    <div class="manager-page_content_no-content" *ngIf="!ownedDataSource.data.length">
                        <h4>You are not the owner of any teams.</h4>
                    </div>
                    <div class="teams-table_container">
                        <table mat-table [dataSource]="ownedDataSource" class="pkm-table manager-page_table teams-table" 
                            *ngIf="ownedDataSource.data.length">
                            <ng-container matColumnDef="name">
                                <td mat-cell *matCellDef="let team" class="pageTable_data teamsTable_name">
                                {{team .name}}
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="ageGroup">
                                <td mat-cell *matCellDef="let team " class="pageTable_data teamsTable_divAge">{{team .ageGroup | uppercase }}</td>
                            </ng-container> 
                            <ng-container matColumnDef="genGroup">
                                <td mat-cell *matCellDef="let team "  class="pageTable_data teamsTable_divGen">{{team .genGroup | uppercase }}</td>
                            </ng-container>
                            <ng-container matColumnDef="playerCount">
                                <td mat-cell *matCellDef="let team "  class="pageTable_data teamsTable_playerCount">{{team .player_count}} players</td>
                            </ng-container>
                            <ng-container matColumnDef="coaches">
                                <td mat-cell *matCellDef="let team "  class="pageTable_data teamsTable_staff">
                                    <span *ngIf="!team.managersInfo">
                                        no coaches
                                    </span>
                                    <span *ngFor="let manager of team .managersInfo">{{ manager.first }} {{ manager.last }}, </span>
                                </td>
                            </ng-container>
                            <ng-container matColumnDef="arrow">
                                <td mat-cell *matCellDef="let element" class="pageTable_data teamsTable_nav"><span class="triangle triangle_right triangle_grey"></span></td>
                            </ng-container>
                                <tr mat-row *matRowDef="let row; columns: ownedDisplayColumns;" class="pageTable_row teamsRow" (click)="clickTeam(row)"></tr>
                        </table>
                    </div>
                </div>

                <div class="manager-page_content-container coachedTeams">
                    <div class="manager-page_section-title coachedTeams_sectionTitle">
                        <h2>Coached</h2>
                    </div>    
                    <div *ngIf="loadingCoached">
                        Loading...
                    </div>
                    <div *ngIf="errorCoached">
                        Error :(
                    </div><div class="manager-page_content_noContent" *ngIf="!coachedDataSource.data.length">
                        <h4>You are not the owner of any teams.</h4>
                    </div>
                    <div class="teams-table_container">
                        <table mat-table [dataSource]="coachedDataSource" class="pkm-table manager-page_table teams-table" *ngIf="coachedDataSource.data.length">
                            <ng-container matColumnDef="name">
                                <td mat-cell *matCellDef="let team" class="pageTable_data teamsTable_name">{{team.name}}</td>
                            </ng-container>
                            <ng-container matColumnDef="ageGroup">
                                <td mat-cell *matCellDef="let team" class="pageTable_data teamsTable_divAge">{{team.ageGroup | uppercase }}</td>
                            </ng-container> 
                            <ng-container matColumnDef="genGroup">
                                <td mat-cell *matCellDef="let team"  class="pageTable_data teamsTable_divGen">{{team.genGroup | uppercase }}</td>
                            </ng-container>
                            <ng-container matColumnDef="playerCount">
                                <td mat-cell *matCellDef="let team"  class="pageTable_data teamsTable_playerCount">{{team.player_count}} players</td>
                            </ng-container>
                            <ng-container matColumnDef="arrow">
                                <td mat-cell *matCellDef="let team" class="pageTable_data teamsTable_nav"><span class="triangle triangle_right triangle_grey"></span></td>
                            </ng-container>
                            <tr mat-row *matRowDef="let row; columns: coachedDisplayColumns;" class="pageTable_row teamsRow" (click)="clickTeam(row)"></tr>
                        </table>
                    </div>
                </div>
            </div>
        </mat-sidenav-content>
        <mat-sidenav #sidenav position="end" mode="over" class="teams-page_sidenav">
            <pkm-add-team-form [sidenav]="sidenav"/>
        </mat-sidenav>
    </mat-sidenav-container>
</div>